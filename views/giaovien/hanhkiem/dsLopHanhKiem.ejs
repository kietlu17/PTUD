<%- include('../../partials/header', { title: 'Hanh Kiem' }) %>
<h1>Danh sách lớp của giáo viên</h1>

<% dsLop.forEach(lop => { %>
  <h2>Lớp: <%= lop.TenLop %> (Số học sinh: <%= lop.hocsinhs.length %>)</h2>

  <form action="/giaovien/hanhkiem/<%= giaovienId %>/lop/<%= lop.id %>" method="POST">
    <table class="table table-bordered text-center">
      <thead class="table-secondary">
        <tr>
          <th>STT</th>
          <th>Họ và tên</th>
          <th>Ngày sinh</th>
          <th>Giới tính</th>
          <th>Hạnh kiểm</th>
          <th>Nhận xét</th>
        </tr>
      </thead>
      <tbody>
        <% lop.hocsinhs.forEach((hs, index) => { %>
          <tr>
            <td><%= index + 1 %></td>
            <td><%= hs.HoVaTen %></td>
            <td><%= hs.NgaySinh ? new Date(hs.NgaySinh).toLocaleDateString() : '' %></td>
            <td><%= hs.GioiTinh %></td>
            <td>
              <select name="hanhKiem[<%= hs.id %>]">
                <option value="Tốt" <%= hs.hanhKiem && hs.hanhKiem.LoaiHanhKiem === 'Tốt' ? 'selected' : '' %>>Tốt</option>
                <option value="Khá" <%= hs.hanhKiem && hs.hanhKiem.LoaiHanhKiem === 'Khá' ? 'selected' : '' %>>Khá</option>
                <option value="Trung Bình" <%= hs.hanhKiem && hs.hanhKiem.LoaiHanhKiem === 'Trung Bình' ? 'selected' : '' %>>Trung Bình</option>
                <option value="Yếu" <%= hs.hanhKiem && hs.hanhKiem.LoaiHanhKiem === 'Yếu' ? 'selected' : '' %>>Yếu</option>
              </select>
            </td>
            <td>
              <input type="text" name="nhanXet[<%= hs.id %>]" class="form-control"
                     value="<%= hs.hanhKiem ? hs.hanhKiem.NhanXet : '' %>">
            </td>
          </tr>
        <% }) %>
      </tbody>
    </table>
    <button type="submit" class="btn btn-primary mb-4">Lưu Hạnh Kiểm</button>
  </form>
<% }) %>
