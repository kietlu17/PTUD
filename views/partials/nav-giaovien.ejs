    <nav class="col-md-2 sidebar">
      <div class="sidebar-info mb-3 d-flex align-items-center">
        <% const avatar = profile?.avatarUrl || null; %>
        <div class="me-2">
          <% if (avatar) { %>
            <img src="<%= avatar %>" class="sidebar-avatar" />
          <% } else { %>
            <div class="sidebar-avatar fallback-avatar"></div>
          <% } %>
        </div>
        <div>
          <div class="nhanvien-ten fw-semibold"><%= profile.HoVaTen %></div>
          <div class="text-muted small"><%= profile?.ChucVu || '' %></div>
        </div>
      </div>
      <% 
    const activePage = typeof currentPage !== 'undefined' ? currentPage : '/dashboard-giaovien';
  %>
      <a href="/dashboard-giaovien" class="<% if (activePage === '/dashboard-giaovien') { %>active<% } %>">Trang Dashboard</a>
      <a href="/giaovien/diemdanh/<%= profile.id %>/lop" class="<% if (activePage === '/diemdanh') { %>active<% } %>">Điểm Danh</a>
      <a href="/giaovien/hanhkiem/<%= profile.id %>/lop" class="<% if (activePage === '/hanhkiem') { %>active<% } %>">Đánh Giá Hạnh Kiểm</a>
      <a href="/giaovien/giao-bai-tap"  class="<% if (activePage === '/giao-bai-tap') { %>active<% } %>">Giao Bài Tập</a>
      <a href="/giaovien/cham-bai" class="<% if (activePage === '/cham-bai') { %>active<% } %>">Chấm Bài Tập</a>

      <a href="/giaovien/nhap-diem" class="<% if (activePage === '/nhapdiem') { %>active<% } %>">Nhập Điểm</a>
            <a href="/giaovien/xem-diem-bo-mon/<%= profile.id %>" 
         class="<% if (activePage === '/xem-diem-bo-mon') { %>active<% } %>">
        Xem Điểm Bộ Môn
      </a>
            <a href="/giaovien/thoikhoabieu"  class="<% if (activePage === '/tkb') { %>active<% } %>">Thời Khóa Biểu</a>
      <a href="/giaovien/xem-diem-chu-nhiem/<%= profile.id %>" 
         class="<% if (activePage === '/xem-diem-chu-nhiem') { %>active<% } %>">
        Xem Điểm Lớp Chủ Nhiệm
      </a>
            <a href="/giaovien/thongke" class="<% if (activePage === '/thongke') { %>active<% } %>">Thống kê</a>

      <button class="logout-btn" onclick="changePassword('<%= currentUser.id %>')">Đổi mật khẩu</button>
      <form id="logoutForm" action="/logout" method="POST" style="display:none;"></form>
<button class="logout-btn" onclick="document.getElementById('logoutForm').submit()">Đăng xuất</button>
    </nav>

    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script>
function changePassword(userId) {
  Swal.fire({
    title: "Nhập mật khẩu mới",
    input: "password",
    inputPlaceholder: "Mật khẩu mới",
    confirmButtonText: "Đổi mật khẩu",
    showCancelButton: true
  }).then(result => {
    if (!result.value) return;

    fetch(`/account/re-password/${userId}`, {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ password: result.value })
    })
    .then(res => {
      if (res.ok) {
        Swal.fire("Thành công", "Đổi mật khẩu thành công", "success");
      } else {
        Swal.fire("Lỗi", "Không thể đổi mật khẩu", "error");
      }
    });
  });
}
</script>
