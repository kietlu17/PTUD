<nav class="col-md-2 sidebar">

  <div class="sidebar-info mb-3 d-flex align-items-center">
    <% const avatar=profile?.avatarUrl || null; %>

      <div class="me-2">
        <% if (avatar) { %>
          <img src="<%= avatar %>" class="sidebar-avatar" />
          <% } else { %>
            <div class="sidebar-avatar fallback-avatar"></div>
            <% } %>
      </div>

      <div>
        <div class="nhanvien-ten fw-semibold">
          <%= profile?.HoTen %>
        </div>
        <div class="text-muted small">
          <%= profile?.ChucVu || "" %>
        </div>
      </div>
  </div>
<a href="/sogiaoduc/dashboard-sogiaoduc"
  class="<%= (currentUrl === '/dashboard-sogiaoduc' || currentUrl === '/sogiaoduc/dashboard-sogiaoduc') ? 'active' : '' %>">
  Trang Dashboard
</a>


  <a href="/sogiaoduc/monhoc" class="<%= currentUrl === '/monhoc' ? 'active' : '' %>">
    Quản lý môn học
  </a>

  <a href="/sogiaoduc/diemthi" class="<%= (currentUrl === '/diemthi' || currentUrl === '/sogiaoduc/diemthi') ? 'active' : '' %>">
    Nhập điểm thi
  </a>

  <a href="/sogiaoduc/xet-tuyen" class="<%= (currentUrl === '/xet-tuyen' || currentUrl === '/sogiaoduc/xet-tuyen' || currentUrl === '/sogiaoduc/xettuyen') ? 'active' : '' %>">
    Xét tuyển
  </a>

  <a href="/sogiaoduc/chi-tieu" class="<%= (currentUrl === '/chi-tieu' || currentUrl === '/sogiaoduc/chi-tieu') ? 'active' : '' %>">
    Chỉ tiêu & Điểm chuẩn
  </a>

  <a href="/sogiaoduc/dongbo/thisinh" class="<%= (currentUrl === '/dongbo' || currentUrl === '/sogiaoduc/chi-tieu') ? 'active' : '' %>">
    Đồng bộ hồ sơ
  </a>

  <form id="logoutForm" action="/logout" method="POST" style="display:none;"></form>
  <button class="logout-btn" onclick="changePassword('<%= currentUser.id %>')">Đổi mật khẩu</button>
  <form id="logoutForm" action="/logout" method="POST" style="display:none;"></form>
  <button class="logout-btn" onclick="document.getElementById('logoutForm').submit()">Đăng xuất</button>

</nav>

<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script>
function changePassword(userId) {
  Swal.fire({
    title: "Nhập mật khẩu mới",
    input: "password",
    inputPlaceholder: "Mật khẩu mới",
    confirmButtonText: "Đổi mật khẩu",
    showCancelButton: true
  }).then(result => {
    if (!result.value) return;

    fetch(`/account/re-password/${userId}`, {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ password: result.value })
    })
    .then(res => {
      if (res.ok) {
        Swal.fire("Thành công", "Đổi mật khẩu thành công", "success");
      } else {
        Swal.fire("Lỗi", "Không thể đổi mật khẩu", "error");
      }
    });
  });
}
</script>